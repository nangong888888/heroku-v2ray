# V2Ray Heroku

## 重要

**由于 V2Ray 修改了自动安装脚本，导致该镜像在 Heroku 无法运行。请在 2020 年 2 月 20 日前部署过本镜像的用户，删除原先的应用，并重新在 Heroku 部署本镜像

**已经 Fork 过本项目的用户，请重新 Fork 一次。**

## 概述

用于在 Heroku 上部署 V2Ray Websocket。

**Heroku 为我们提供了免费的容器服务，我们不应该滥用它，所以本项目不宜做为长期翻墙使用。**

**可以部署两个以上的应用，实现 [负载均衡](https://toutyrater.github.io/app/balance.html)，避免长时间大流量连接某一应用而被 Heroku 判定为滥用。**

**Heroku 的网络并不稳定，部署前请三思。**

## 镜像

本镜像仅 6 MB，比起其他用于 Heroku 的 V2Ray 镜像，不会因为大量占用资源而被封号。

点击部署https://dashboard.heroku.com/new?template=https://github.com/nangong888888/heroku-v2ray

## ENV 设定

### UUID

`UUID` > `一个 UUID，供用户连接时验证身份使用`。

## 注意

WebSocket 路径为 `/`。

`alterId` 为 `64`。

V2Ray 将在部署时自动安装最新版本。

**出于安全考量，除非使用 CDN，否则请不要使用自定义域名，而使用 Heroku 分配的二级域名，以实现 V2Ray Websocket + TLS。**

Workers反向代理套CF代码

________________________________________________________________________________________________________________________________

addEventListener(

  'fetch',event => {
  
     let url=new URL(event.request.url);
     
     url.hostname='xxx.com';
     
     if(url.protocol == 'https:') {
     
        url.protocol='http:'
        
     }
     
     let request=new Request(url,event.request);
     
     event.respondWith(
     
          fetch(request)
          
    )
    
  }
  
)

_____________________________________________________________________________________________________________________________

网友自建节点 www.hlwcdn.com

134.122.129.111 - HK - ED：2020-05-31

23.224.165.178 -LA - ED：2020-05-02

23.224.243.21 -LA - ED：2020-08-01

_____________________________________________________________________________________________________________________________

cloudflare IP集合：

108.162.236.1/24 联通 走美国

172.64.32.1/24 移动 走香港

104.16.160.1/24 电信 走美国洛杉矶

---------

172.64.0.0/24 电信 美国旧金山

104.20.157.0/24 联通 走日本

104.28.14.0/24 移动 走新加坡

 （联通移动推荐节点）
 
 104.23.240.0-104.23.243.254
 
 （电信推荐百度云合作ip）
 
 162.159.208.4-162.159.208.103
 
 162.159.209.4-162.159.209.103
 
 162.159.210.4-162.159.210.103
 
 162.159.211.4-162.159.211.103
 
节点速度比较快的有：

104.20.157.2 

104.18.62.2 

141.101.115.3 

104.16.160.3

百度云加速与Cloudflare合作节点还有：

162.159.211.4-103

103.21.244.0/22

103.22.200.0/22

103.31.4.0/22

104.16.0.0/12

108.162.192.0/18

131.0.72.0/22

141.101.64.0/18

162.158.0.0/15

172.64.0.0/13

173.245.48.0/20

188.114.96.0/20

190.93.240.0/20

197.234.240.0/22

198.41.128.0/17

其它的节点还有：

#适合电信的节点

104.23.240.*

#走欧洲各国出口 英国德国荷兰等 延迟比美国高一些 适合源站在欧洲的网站

172.64.32.*

#虽然去程走新加坡，但是回程线路的绕路的，实际效果不好，不推荐

104.16.160.*

#圣何塞的线路，比洛杉矶要快一点，推荐

108.162.236.*

#亚特兰大线路，延迟稳定，但是延迟较高

#适合移动的节点

162.158.133.* 

#走的丹麦，这一段ip只有部分能用，可以自己试一下。绕美国。

198.41.214.*

198.41.212.*

198.41.208.*

198.41.209.*

172.64.32.*

141.101.115.*

#移动走香港的IP段有很多，以上并不是全部。CF移动走香港的分直连和走ntt的效果都挺不错的，不过部分地区晚上还是会丢包。

172.64.0. *

#这是走圣何塞的，一般用香港的就行

172.64.16.* 

#欧洲线路.绕

 #1.0.0.1效果较好
 
电信部分

大多数省直接使用1.0.0.0即可，延迟低，丢包少，

 #移动部分
 
#新加坡

 104.18.48.0-104.18.63.255
 
104.24.112.0-104.24.127.255

104.27.128.0-104.27.143.255

104.28.0.0-104.28.15.255

 #移动部分
 
#圣何塞 

104.28.16.0-31.255

104.27.144.0-243.254

104.23.240.0-243.254

 #香港cloudflare1-100g.hkix.net
 
1.0.0.0-254

1.1.1.0-254

 #香港直连
 
104.16.0.0-79.255

104.16.96.0-175.254

104.16.192.0-207.255
____________________________________
172.69.184.0/22   菲律宾

162.158.136.0/22

162.158.228.0/22

172.69.188.0/22   立陶宛

103.22.202.0/24   香港

103.22.203.0/24   

108.162.222.0/24  

108.162.223.0/24 

162.158.176.0/24 

162.158.177.0/24

162.158.178.0/24

162.158.179.0/24

172.68.248.0/22

172.69.96.0/22

172.69.176.0/22

173.245.62.0/24

103.31.4.0/23     台北

162.158.224.0/22

162.158.240.0/22

172.69.72.0/22  澳门

172.69.80.0/22  柬埔寨

108.162.208.0/24  加拿大

108.162.240.0/24  

108.162.241.0/24   

162.158.144.0/24

162.158.145.0/24

162.158.146.0/24

162.158.147.0/24

172.69.156.0/22

172.69.212.0/22

172.69.216.0/22

108.162.214.0/24  洛杉矶

108.162.215.0/24

141.101.72.0/24

162.158.56.0/22

172.68.44.0/22

172.68.208.0/22

172.69.32.0/22

173.245.48.0/24

108.162.216.0/24  芝加哥

108.162.217.0/24

141.101.73.0/24

162.158.72.0/22

172.68.56.0/24 

172.68.57.0/24 

172.68.58.0/24 

172.68.59.0/24 

162.158.140.0/24  凤凰城

162.158.141.0/24

162.158.142.0/24

162.158.143.0/24

108.162.218.0/24  纽瓦克

108.162.219.0/24

162.158.60.0/22

173.245.52.0/24  纽约

108.162.220.0/24  达拉斯

108.162.221.0/24 

141.101.74.0/24

172.69.64.0/21

162.158.252.0/22  圣何塞

172.68.80.0/22

172.68.132.0/22

172.68.140.0/22

172.68.188.0/22

172.69.16.0/22

162.158.244.0/22  拉斯维加斯

108.162.226.0/24  日本东京

108.162.227.0/24 

103.22.200.0/23  

162.158.4.0/22

162.158.116.0/22

172.69.108.0/22

172.69.152.0/22  日本大阪

108.162.228.0/24  法国巴黎

141.101.66.0/24

141.101.67.0/24

141.101.68.0/24 

141.101.69.0/24   

108.162.229.0/24 

141.101.88.0/22

162.158.192.0/24

162.158.193.0/24

162.158.194.0/24

162.158.195.0/24

172.69.224.0/22

162.158.120.0/24  迈阿密

162.158.121.0/24

162.158.122.0/24

162.158.123.0/24

108.162.210.0/24  

108.162.211.0/24  

108.162.212.0/24  

108.162.213.0/24

108.162.236.0/24  亚特兰大

108.162.237.0/24

108.162.238.0/24 

162.158.124.0/22

162.158.184.0/24

162.158.185.0/24

162.158.186.0/24

162.158.187.0/24

172.68.32.0/22    丹佛

172.68.36.0/22   圣路易斯

172.68.52.0/22   波士顿

108.162.243.0/24  西雅图

108.162.244.0/24

108.162.245.0/24

108.162.246.0/24

162.158.104.0/24

162.158.105.0/24

162.158.106.0/24

162.158.107.0/24

162.158.76.0/22   阿什本

172.68.64.0/22

172.69.60.0/22

173.245.54.0/24

188.114.104.0/24

172.68.148.0/22  堪萨斯

172.68.204.0/22  底特律

172.68.172.0/22 波兰特

172.69.168.0/22  休斯顿

172.69.40.0/22  盐湖城

172.68.228.0/22  圣地亚哥

172.68.68.0/22 宾法尼西亚费城

172.68.72.0/22  田纳西州纳什维尔

172.68.76.0/22         佛罗里达州坦帕  

172.68.88.0/22  内布拉斯加州奥马哈 

172.69.4.0/22   德克萨斯州麦卡伦

172.69.48.0/22  宾法尼西亚州匹兹堡

172.69.88.0/22 印第安纳州印第安纳波利斯

172.69.140.0/22 加利福尼亚州萨克拉门托

172.69.180.0/22 佛罗里达州塔拉哈西

172.69.196.0/22 田纳西州孟菲斯

172.69.208.0/22 佛罗里达州杰克逊维尔

108.162.247.0/24  澳大利亚

108.162.248.0/24 

108.162.249.0/24 

108.162.250.0/24 

162.158.0.0/22

172.68.0.0/22

172.68.84.0/22

172.68.116.0/22

108.162.252.0/24  韩国

141.101.82.0/24   

141.101.83.0/24

141.101.84.0/24

141.101.85.0/24

162.158.188.0/24

162.158.189.0/24

162.158.190.0/24

162.158.191.0/24

108.162.253.0/24  美国明尼苏达州明尼阿波利斯

162.158.212.0/22

108.162.254.0/24  旧金山

141.101.64.0/24   荷兰

141.101.65.0/24

141.101.75.0/24

141.101.76.0/24

141.101.77.0/24

141.101.104.0/24 

162.158.108.0/22

172.69.52.0/22

141.101.70.0/24   英国伦敦

141.101.71.0/24

141.101.98.0/24 

141.101.99.0/24 

141.101.105.0/24 

141.101.106.0/24

141.101.107.0/24  

162.158.152.0/22

162.158.156.0/22

172.64.16.0/20

172.69.124.0/22

188.114.105.0/24

162.158.32.0/22  英国曼彻斯底

172.69.172.0/22  英国爱丁堡

162.158.36.0/24  爱尔兰

162.158.37.0/24

162.158.38.0/24

162.158.39.0/24

172.69.120.0/22

162.158.82.0/24  德国法兰克福

162.158.83.0/24

162.158.84.0/24

162.158.85.0/24

162.158.86.0/24

162.158.87.0/24

162.158.88.0/24

162.158.89.0/24

162.158.90.0/24

162.158.91.0/24

162.158.92.0/24

162.158.93.0/24

162.158.94.0/24

162.158.95.0/24

162.158.112.0/24 德国柏林

162.158.113.0/24

162.158.114.0/24

162.158.115.0/24

162.158.200.0/22  德国汉堡

172.68.108.0/22  德国慕尼黑

162.158.148.0/22  瑞士

162.158.180.0/22  瑞典

172.68.180.0/22

162.158.96.0/24  阿联酋

162.158.97.0/24

162.158.98.0/24

162.158.99.0/24

141.101.95.0/24  捷克

141.101.96.0/24 

141.101.97.0/24 

172.68.212.0/22

162.158.100.0/24 波兰华沙

162.158.101.0/24

162.158.102.0/24

162.158.103.0/24

172.68.136.0/22

141.101.100.0/22  智利

172.68.112.0/22

141.101.108.0/24  哥伦比亚

141.101.109.0/24 

141.101.110.0/24 

141.101.111.0/24 

172.69.204.0/22

162.158.8.0/24    卡塔尔多哈 

162.158.9.0/24    

162.158.10.0/24  

162.158.11.0/24    

162.158.12.0/22   科威特

162.158.16.0/22   罗马尼亚

172.69.148.0/22

162.158.20.0/22   法国马赛

172.69.220.0/22  法国

162.158.24.0/24   新加坡

162.158.25.0/24

162.158.26.0/24

162.158.27.0/24

162.158.160.0/20

172.68.144.0/22

172.69.132.0/22

162.158.28.0/24   阿曼

162.158.29.0/24

162.158.30.0/24

162.158.31.0/24

162.158.40.0/24   肯尼亚

162.158.41.0/24

162.158.42.0/24

162.158.43.0/24

162.158.44.0/24   印度

162.158.45.0/24 

162.158.46.0/24 

162.158.47.0/24 

162.158.48.0/24 

162.158.49.0/24 

162.158.50.0/24 

162.158.51.0/24 

162.158.52.0/24 

162.158.53.0/24 

162.158.54.0/24

162.158.55.0/24  

172.68.160.0/22

172.69.104.0/22

162.158.128.0/22  埃及

162.158.132.0/24  丹麦

162.158.133.0/24

162.158.134.0/24

162.158.135.0/24

162.158.196.0/24  意大利米兰

162.158.197.0/24

162.158.198.0/24

162.158.199.0/24

188.114.100.0/24

188.114.101.0/24

188.114.102.0/24

188.114.103.0/24

172.68.196.0/22  意大利罗马

172.68.48.0/22    奥地利

172.69.0.0/22  

162.158.208.0/22  保加利亚

172.68.60.0/22  希腊

172.69.56.0/22

162.158.220.0/22  挪威

162.158.232.0/22  比利时

162.158.236.0/22  芬兰

162.158.248.0/22  乌克兰

172.68.236.0/22

172.68.4.0/22 泰国

172.68.104.0/22

172.68.232.0/22

172.68.240.0/22

172.68.8.0/22  俄罗斯

172.68.12.0/22

172.68.244.0/22

172.68.16.0/20  巴西圣保罗

188.114.96.0/24

188.114.97.0/24

188.114.98.0/24

188.114.99.0/24

172.68.216.0/22  巴西里约热内卢

172.68.40.0/22  安哥拉

172.68.96.0/22   巴拿马

172.68.92.0/22  西班牙

188.114.106.0/24

188.114.107.0/24

188.114.108.0/24

188.114.109.0/24

188.114.110.0/24

188.114.111.0/24

172.68.100.0/22  葡萄牙

172.68.120.0/22  库拉索

172.68.124.0/22  亚美尼亚

172.68.128.0/22  吉布提

172.68.152.0/22  塞尔维亚

172.68.176.0/22  厄瓜多尔

172.68.184.0/22  南非

172.69.112.0/22

197.234.240.0/22

172.68.200.0/22  斯里兰卡

172.68.220.0/22  克罗地亚

172.68.224.0/22  匈牙利

172.69.76.0/22  尼泊尔

172.69.84.0/22  黎巴嫩

172.69.92.0/22   毛里求斯

172.69.100.0/22  伊拉克

172.69.116.0/22  土耳其

172.69.128.0/22  以色列

172.69.136.0/22  爱沙尼亚

172.69.144.0/22  冰岛

172.69.164.0/22  墨西哥

172.69.192.0/22  拉脱维亚

172.69.200.0/22  摩尔多瓦
